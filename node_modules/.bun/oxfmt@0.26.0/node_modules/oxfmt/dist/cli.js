import { n as runCli } from "./bindings-Dwhnp05p.js";
import { i as resolvePlugins } from "./prettier-CPchlMSc.js";
import Tinypool from "tinypool";

//#region src-js/cli/worker-proxy.ts
let pool = null;
async function initExternalFormatter(numThreads) {
	pool = new Tinypool({
		filename: new URL("./cli-worker.js", import.meta.url).href,
		minThreads: numThreads,
		maxThreads: numThreads
	});
	return resolvePlugins();
}
async function formatEmbeddedCode(options, tagName, code) {
	return pool.run({
		options,
		code,
		tagName
	}, { name: "formatEmbeddedCode" });
}
async function formatFile(options, parserName, fileName, code) {
	return pool.run({
		options,
		code,
		fileName,
		parserName
	}, { name: "formatFile" });
}
async function sortTailwindClasses(filepath, options, classes) {
	return pool.run({
		filepath,
		options,
		classes
	}, { name: "sortTailwindClasses" });
}

//#endregion
//#region src-js/cli.ts
(async () => {
	const args = process.argv.slice(2);
	if (!process.stdout.isTTY) process.stdout._handle?.setBlocking?.(true);
	const [mode, exitCode] = await runCli(args, initExternalFormatter, formatEmbeddedCode, formatFile, sortTailwindClasses);
	if (mode === "init") {
		await import("./init-BQYL9OnU.js").then((m) => m.runInit());
		return;
	}
	if (mode === "migrate:prettier") {
		await import("./migrate-prettier-C9NBNJo5.js").then((m) => m.runMigratePrettier());
		return;
	}
	process.exitCode = exitCode;
})();

//#endregion
export {  };